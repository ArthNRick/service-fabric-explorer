<div style="display: flex;flex-direction: row; flex-wrap: wrap;">
    <div tabindex="-1" class="expander icon " aria-hidden="true" (click)="toggleShow(); $event.stopPropagation()"
        *ngIf="node.children.length > 0"
        [ngClass]="{ 'mif-chevron-thin-up': !showChildren, 'mif-chevron-thin-down': showChildren }"></div>
    <!-- <div *ngIf="node.healthEvaluation">
        <div>
            <app-health-badge [badgeClass]="node.healthEvaluation.healthState.badgeClass"></app-health-badge>
            <a [routerLink]="node.healthEvaluation.viewPath">{{node.healthEvaluation.treeName}}</a>
            <span *ngIf="!showChildren">({{node.totalChildCount}}) </span>
            <span (click)="onAnchorSet(node)" *ngIf="!isAnchor" style="margin-left: 10px; cursor: pointer;"
                class="mif-anchor link" title="Only view this sub tree."></span>
        </div>
    </div> -->

    <div *ngFor="let display of node.displayNames; let i = index" class="display-row-container">
        <div class="display-row-item">
            <div *ngIf="i > 0" style="margin-right: 5px;">/</div>
            <app-health-badge [badgeClass]="display.badge"></app-health-badge>
            <a [routerLink]="display.link">{{display.text}}</a>
            <span (click)="onAnchorSet(node)" *ngIf="!isAnchor" style="cursor: pointer; margin-left: 5px"
                class="mif-anchor link" title="Only view this sub tree."></span>
        </div>
    </div>
</div>

<div *ngIf="node.healthEvaluation && (!condensed || node.healthEvaluation.raw.Kind === 'Event')" class="nested-hover"
    style="padding-left: 20px; padding-bottom: 10px;"
    [ngStyle]="{'border-left' : node.children.length > 0 ? '2px solid gray' : 'initial'}">
    <div class="text-container">
        <div #tref style="overflow: hidden; "
            [ngStyle]="{'max-height': fullDescription || (displayTextIsLong && showFullText) ? 'none' : '61px'}">
            <span>
                <app-clip-board></app-clip-board>
            </span>
            {{node.healthEvaluation.description}}
        </div>
    </div>
    <div *ngIf="displayTextIsLong && !fullDescription" class="nested show-more-container">
        <div style="display: flex;">
            <button (click)="toggleShowText()" class="solid-button">show {{ showFullText ? 'less' : 'all' }}</button>
        </div>
    </div>
    <span *ngIf="displayTextIsLong && !showFullText" style="height: 5px;top: 68px;position: absolute;">...</span>
</div>

<ul *ngIf="showChildren">
    <li *ngFor="let child of (node.children | unhealtyEvaluationChildFilter:containsErrorInPath ); trackBy: trackById; let l = last;"
        [ngStyle]="{'padding-left': node.children.length > 0 ? '20px' : '11px', 'border-left' : node.children.length > 1 &&  !l ? '2px solid gray' : 'initial'}"
        style="position: relative;">
        <div class="up-bar" *ngIf="l"></div>
        <div class="left-bar"></div>
        <app-unhealthy-evaluation [node]="child" [condensed]="condensed" [containsErrorInPath]="containsErrorInPath"
            [fullDescription]="fullDescription" (onAnchor)="onAnchorSet($event);"></app-unhealthy-evaluation>
    </li>
</ul>